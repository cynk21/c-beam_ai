{"version":3,"file":"ImportModal.js","sources":["../../../../src/lib/components/ImportModal.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport { toast } from 'svelte-sonner';\n\timport { getContext, onMount } from 'svelte';\n\tconst i18n = getContext('i18n');\n\n\timport Modal from '$lib/components/common/Modal.svelte';\n\timport { extractFrontmatter } from '$lib/utils';\n\n\texport let show = false;\n\n\texport let onImport = (e) => {};\n\texport let onClose = () => {};\n\n\texport let loadUrlHandler: Function = () => {};\n\texport let successMessage: string = '';\n\n\tlet loading = false;\n\tlet url = '';\n\n\tconst submitHandler = async () => {\n\t\tloading = true;\n\n\t\tif (!url) {\n\t\t\ttoast.error($i18n.t('Please enter a valid URL'));\n\t\t\tloading = false;\n\t\t\treturn;\n\t\t}\n\n\t\tconst res = await loadUrlHandler(url).catch((err) => {\n\t\t\ttoast.error(`${err}`);\n\t\t\tloading = false;\n\t\t\treturn null;\n\t\t});\n\n\t\tif (res) {\n\t\t\tif (!successMessage) {\n\t\t\t\tsuccessMessage = $i18n.t('Function imported successfully');\n\t\t\t}\n\n\t\t\ttoast.success(successMessage);\n\n\t\t\tlet func = res;\n\t\t\tfunc.id = func.id || func.name.replace(/\\s+/g, '_').toLowerCase();\n\n\t\t\tconst frontmatter = extractFrontmatter(res.content); // Ensure frontmatter is extracted\n\n\t\t\tif (frontmatter?.title) {\n\t\t\t\tfunc.name = frontmatter.title;\n\t\t\t}\n\n\t\t\tfunc.meta = {\n\t\t\t\t...(func.meta ?? {}),\n\t\t\t\tdescription: frontmatter?.description ?? func.name\n\t\t\t};\n\n\t\t\tonImport(func);\n\t\t\tshow = false;\n\t\t}\n\t};\n</script>\n\n<Modal size=\"sm\" bind:show>\n\t<div>\n\t\t<div class=\" flex justify-between dark:text-gray-300 px-5 pt-4 pb-2\">\n\t\t\t<div class=\" text-lg font-medium self-center\">{$i18n.t('Import')}</div>\n\t\t\t<button\n\t\t\t\tclass=\"self-center\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tshow = false;\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<svg\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\tclass=\"w-5 h-5\"\n\t\t\t\t>\n\t\t\t\t\t<path\n\t\t\t\t\t\td=\"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z\"\n\t\t\t\t\t/>\n\t\t\t\t</svg>\n\t\t\t</button>\n\t\t</div>\n\n\t\t<div class=\"flex flex-col md:flex-row w-full px-4 pb-3 md:space-x-4 dark:text-gray-200\">\n\t\t\t<div class=\" flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6\">\n\t\t\t\t<form\n\t\t\t\t\tclass=\"flex flex-col w-full\"\n\t\t\t\t\ton:submit|preventDefault={() => {\n\t\t\t\t\t\tsubmitHandler();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div class=\"px-1\">\n\t\t\t\t\t\t<div class=\"flex flex-col w-full\">\n\t\t\t\t\t\t\t<div class=\" mb-1 text-xs text-gray-500\">{$i18n.t('URL')}</div>\n\n\t\t\t\t\t\t\t<div class=\"flex-1\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tclass=\"w-full text-sm bg-transparent disabled:text-gray-500 dark:disabled:text-gray-500 outline-hidden\"\n\t\t\t\t\t\t\t\t\ttype=\"url\"\n\t\t\t\t\t\t\t\t\tbind:value={url}\n\t\t\t\t\t\t\t\t\tplaceholder={$i18n.t('Enter the URL to import')}\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t<!-- $i18n.t('Enter the URL of the function to import') -->\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"flex justify-end pt-3 text-sm font-medium\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full flex flex-row space-x-1 items-center {loading\n\t\t\t\t\t\t\t\t? ' cursor-not-allowed'\n\t\t\t\t\t\t\t\t: ''}\"\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{$i18n.t('Import')}\n\n\t\t\t\t\t\t\t{#if loading}\n\t\t\t\t\t\t\t\t<div class=\"ml-2 self-center\">\n\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\tclass=\" w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t><style>\n\t\t\t\t\t\t\t\t\t\t\t.spinner_ajPY {\n\t\t\t\t\t\t\t\t\t\t\t\ttransform-origin: center;\n\t\t\t\t\t\t\t\t\t\t\t\tanimation: spinner_AtaB 0.75s infinite linear;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t@keyframes spinner_AtaB {\n\t\t\t\t\t\t\t\t\t\t\t\t100% {\n\t\t\t\t\t\t\t\t\t\t\t\t\ttransform: rotate(360deg);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t</style><path\n\t\t\t\t\t\t\t\t\t\t\td=\"M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z\"\n\t\t\t\t\t\t\t\t\t\t\topacity=\".25\"\n\t\t\t\t\t\t\t\t\t\t/><path\n\t\t\t\t\t\t\t\t\t\t\td=\"M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"spinner_ajPY\"\n\t\t\t\t\t\t\t\t\t\t/></svg\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</Modal>\n"],"names":[],"mappings":";;;;;;AAGO,QAAA,OAAO,WAAW,MAAM;;QAKnB,OAAO,MAAA,IAAA;QAEP,WAAY,OAAA;AAAA;AACZ,MAAA,EAAA,UAAA,MAAA;AAAA;AAEA,MAAA,EAAA,iBAAA,MAAA;AAAA;QACA,iBAAyB,GAAA,IAAA;MAGhC,MAAM;;;;;;;;;;;;;;;;;;;;;;;AA+CuC,iBAAA,yHAAA,OAAA,MAAM,EAAE,QAAQ,qqBA8BjB,MAAM,EAAE,KAAK,CAAA,CAAA,uJAAA,cAAA,eAOxC,MAAM,EAAE,yBAAyB,GADlC,CAAA,CAAA,YAAA,cAAA,SAAA,KAYoL,CAAA,CAAA,8FAAA,+LAAA,OAE/L,IAEO,IAAA,CAAA,mBAET,EAAA,IAAA,OAAA,MAAM,EAAE,QAAQ;;;;;;;;"}